FROM node:dubnium-alpine3.11
LABEL maintainer="Daniel Rataj <daniel.rataj@centrum.cz>"
LABEL org.opencontainers.image.source="https://github.com/whoopsmonitor/whoopsmonitor-check-redis-connect"
LABEL com.whoopsmonitor.documentation="https://github.com/whoopsmonitor/whoopsmonitor-check-redis-connect"
LABEL com.whoopsmonitor.icon="data:image/png;base64,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"
LABEL com.whoopsmonitor.env.WM_CONNECTION_STRING="redis://user:password@host"

WORKDIR /tmp/app

COPY ./package.json ./package.json
COPY ./package-lock.json ./package-lock.json

RUN npm install

WORKDIR /app
RUN cp -R /tmp/app/* ./
COPY ./src/index.js ./src/index.js

CMD [ "npm", "start", "--silent" ]
